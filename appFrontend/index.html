<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Document</title>

    <script>
        // Function to handle form submission
        function handleSubmit(event) {
            event.preventDefault(); // Prevent the form from actually submitting

            const form = document.getElementById("myForm");
            const formData = {};

            // Loop through the child elements of the form
            for (let i = 0; i < form.children.length; i++) {
                const element = form.children[i];

                // Check if the element is an input or select element
                if (element.tagName === "INPUT" || element.tagName === "SELECT") {
                    const fieldName = element.getAttribute("name");
                    const fieldValue = element.value;

                    // Check if the field has a name attribute
                    if (fieldName) {
                        formData[fieldName] = fieldValue;
                    }
                }
            }

            // Do something with the form data (e.g., log it to the console)
            console.log("Form Data:", formData);
        }

        // Attach the handleSubmit function to the form's onsubmit event
        const myForm = document.getElementById("myForm");
        myForm.addEventListener("submit", handleSubmit);

        // Function to add a dynamic field when the button is clicked
        function addField() {
            const dynamicFieldsContainer = document.getElementById("dynamicFieldsContainer");

            // Create and append the new input and select elements
            const newDiv = document.createElement("div");
            newDiv.classList.add("mb-3", "d-flex");

            const newInput = document.createElement("input");
            newInput.type = "text";
            newInput.classList.add("form-control");
            newInput.placeholder = "column name";

            const newSelect = document.createElement("select");
            newSelect.classList.add("mx-2");
            newSelect.name = "type";
            // Add options to the select element
            const optionValues = ["", "STRING", "INTEGER", "TEXT", "BOOLEAN"];
            optionValues.forEach((value) => {
                const option = document.createElement("option");
                option.value = value;
                option.textContent = value || "type";
                newSelect.appendChild(option);
            });

            // Append the new elements to the container
            newDiv.appendChild(newInput);
            newDiv.appendChild(newSelect);
            dynamicFieldsContainer.appendChild(newDiv);
        }

        // Attach the addField function to the button's click event
        const addFieldButton = document.getElementById("addFieldButton");
        addFieldButton.addEventListener("click", addField);
    </script>

</head>

<body>
    <form id="myForm">
        <h6>Table Name:</h6>
        <input type="text" id="table-name" placeholder="table name" name="tableName">
        <h6 class="mt-3">Fields:</h6>
        <div id="dynamicFieldsContainer" class="mb-3 d-flex">
            <!-- This div will be populated dynamically -->
        </div>
        <button type="button" id="addFieldButton">Add Field</button>
        <input type="submit" value="Submit">
    </form>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
</body>

</html>